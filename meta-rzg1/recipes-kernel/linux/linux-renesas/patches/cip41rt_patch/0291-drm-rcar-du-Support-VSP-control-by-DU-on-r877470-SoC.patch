From 354171e27b861a35546862e386e98fd6637318d2 Mon Sep 17 00:00:00 2001
From: "Nguyen Van Tu [FGA.AIS]" <TuNV16@fsoft.com.vn>
Date: Mon, 22 Oct 2018 15:25:51 +0700
Subject: [PATCH 291/559] drm: rcar-du: Support VSP control by DU on r877470
 SoC

Signed-off-by: Hung Dong <hung.dong.xd@rvc.renesas.com>
Signed-off-by: Nguyen Van Linh [FGA.BU13] <LinhNV25@fsoft.com.vn>
Signed-off-by: vietn <vietn@fsoft.com.vn>
Signed-off-by: Nguyen Van Tu [FGA.AIS] <TuNV16@fsoft.com.vn>
---
 drivers/gpu/drm/rcar-du/rcar_du_drv.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/rcar-du/rcar_du_drv.c b/drivers/gpu/drm/rcar-du/rcar_du_drv.c
index ce92749..0d1fe51 100644
--- a/drivers/gpu/drm/rcar-du/rcar_du_drv.c
+++ b/drivers/gpu/drm/rcar-du/rcar_du_drv.c
@@ -182,8 +182,10 @@ static const struct rcar_du_device_info rcar_du_r8a7794_info = {
 static const struct rcar_du_device_info rcar_du_r8a77470_info = {
 	.gen = 2,
 	.features = RCAR_DU_FEATURE_CRTC_IRQ_CLOCK
-				| RCAR_DU_FEATURE_EXT_CTRL_REGS,
+				| RCAR_DU_FEATURE_EXT_CTRL_REGS
+				| RCAR_DU_FEATURE_VSP1_SOURCE,
 	.num_crtcs = 1,
+	.vspd_crtcs = BIT(0),
 	.routes = {
 		/* R8A7745 has two RGB outputs and one (currently unsupported)
 		* TCON output.
-- 
2.7.4

